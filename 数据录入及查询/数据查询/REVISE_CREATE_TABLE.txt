CREATE TABLE EVENT_CATEGORY
(ENO VARCHAR(4) PRIMARY KEY,
ENAME VARCHAR(20) NOT NULL);

CREATE TABLE FIELD
(FNO VARCHAR(4) PRIMARY KEY,
FNAME VARCHAR(10) NOT NULL);

CREATE TABLE CTIME
(TNO VARCHAR(4) PRIMARY KEY,
SPECIFIC_TIME VARCHAR(20) NOT NULL);

CREATE TABLE COLLEGE
(CL_NO VARCHAR(4) PRIMARY KEY,
CL_NAME VARCHAR(30) NOT NULL); 

CREATE TABLE POST
(PNO VARCHAR(4) PRIMARY KEY,
PNAME VARCHAR(20) NOT NULL);

CREATE TABLE REFERREE
(RE_NO VARCHAR(4) PRIMARY KEY,
RE_NAME VARCHAR(10) NOT NULL,
SEX VARCHAR(10),
PNO VARCHAR(4),
CONSTRAINT FK_SEX CHECK (SEX IN ('男','女')),
CONSTRAINT FK_PNO FOREIGN KEY (PNO) REFERENCES POST(PNO));

CREATE TABLE ATHLETE
(ANO VARCHAR(4) PRIMARY KEY,
ANAME VARCHAR(10) NOT NULL,
ID VARCHAR(10),
SEX VARCHAR(10),
CL_NO VARCHAR(4),
CONSTRAINT FK_SEX2 CHECK (SEX IN ('男','女')),
CONSTRAINT FK_CL_NO FOREIGN KEY (CL_NO) REFERENCES COLLEGE(CL_NO));


CREATE TABLE COMPETITION
(CNO VARCHAR(4) PRIMARY KEY,
CNAME VARCHAR(20) NOT NULL,
SEX VARCHAR(10),
COMPETITION_TYPE VARCHAR(10) NOT NULL,
FNO VARCHAR(4),
ENO VARCHAR(4),
TNO VARCHAR(4),
CONSTRAINT FK_SEX1 CHECK (SEX IN ('男','女')),
CONSTRAINT FK_FNO FOREIGN KEY (FNO) REFERENCES FIELD(FNO),
CONSTRAINT FK_ENO FOREIGN KEY (ENO) REFERENCES EVENT_CATEGORY(ENO),
CONSTRAINT FK_TNO FOREIGN KEY (TNO) REFERENCES CTIME(TNO));


CREATE TABLE RULE
(RU_NO VARCHAR(4) PRIMARY KEY,
RU_NAME VARCHAR(30),
CNO VARCHAR(4),
CONSTRAINT FK_CNO1 FOREIGN KEY (CNO) REFERENCES COMPETITION(CNO));


CREATE TABLE REFEREE_COMPETITION
(RE_NO VARCHAR(4),
CNO VARCHAR(4) ,
PRIMARY KEY(RE_NO,CNO),
CONSTRAINT FK_RE_NO FOREIGN KEY (RE_NO) REFERENCES REFERREE(RE_NO),
CONSTRAINT FK_CNO2 FOREIGN KEY (CNO) REFERENCES COMPETITION(CNO));

CREATE TABLE TEAM_COMPETITION
(CNO VARCHAR(4) PRIMARY KEY,
TEAM_NUMBER INT NOT NULL,
CONSTRAINT FK_CNO3 FOREIGN KEY (CNO) REFERENCES COMPETITION(CNO));

CREATE TABLE COLLEGE_TEAM
(CT_NO VARCHAR(4) PRIMARY KEY,
CT_NAME VARCHAR(30) NOT NULL,
CL_NO VARCHAR(4),
CNO VARCHAR(4),
CONSTRAINT FK_CL_NO2 FOREIGN KEY (CL_NO) REFERENCES COLLEGE(CL_NO),
CONSTRAINT FK_CNO22 FOREIGN KEY (CNO) REFERENCES TEAM_COMPETITION(CNO)); 


CREATE TABLE TEAM_PARTICIPATION
(CT_NO VARCHAR(4),
CNO VARCHAR(4) ,
GRADE VARCHAR(20),
RANK VARCHAR(2) NOT NULL,
COMPETE_ORDER VARCHAR(2) NOT NULL,
PRIMARY KEY(CT_NO,CNO),
CONSTRAINT FK_CT_NO FOREIGN KEY (CT_NO) REFERENCES COLLEGE_TEAM(CT_NO),
CONSTRAINT FK_CNO4 FOREIGN KEY (CNO) REFERENCES COMPETITION(CNO));


CREATE TABLE TEAM_ATHLETE
(CT_NO VARCHAR(4),
ANO VARCHAR(4) ,
PRIMARY KEY(CT_NO,ANO),
CONSTRAINT FK_CT_NO2 FOREIGN KEY (CT_NO) REFERENCES COLLEGE_TEAM(CT_NO),
CONSTRAINT FK_ANO FOREIGN KEY (ANO) REFERENCES ATHLETE(ANO));

CREATE TABLE INDIVIDUAL_COMPETITION
(CNO VARCHAR(4) PRIMARY KEY,
LIMITED_NUMBER INT NOT NULL,
CONSTRAINT FK_CNO5 FOREIGN KEY (CNO) REFERENCES COMPETITION(CNO));

CREATE TABLE INDIVIDUAL_PARTICIPATION
(ANO VARCHAR(4) ,
CNO VARCHAR(4) ,
GRADE VARCHAR(20),
RANK VARCHAR(2) NOT NULL,
COMPETE_ORDER VARCHAR(2) NOT NULL,
PRIMARY KEY(ANO,CNO),
CONSTRAINT FK_ANO2 FOREIGN KEY (ANO) REFERENCES ATHLETE(ANO),
CONSTRAINT FK_CNO6 FOREIGN KEY (CNO) REFERENCES INDIVIDUAL_COMPETITION(CNO));

SELECT TNAME,TABTYPE
FROM TAB
WHERE TNAME NOT LIKE '%$%';








DROP TABLE INDIVIDUAL_PARTICIPATION;
DROP TABLE INDIVIDUAL_COMPETITION;
DROP TABLE TEAM_COMPETITION;
DROP TABLE TEAM_ATHLETE;
DROP TABLE TEAM_PARTICIPATION;
DROP TABLE COLLEGE_TEAM;
DROP TABLE REFEREE_COMPETITION;
DROP TABLE RULE;
DROP  TABLE COMPETITION;
DROP TABLE ATHLETE;

DROP TABLE TEAM_COMPETITION;


DROP TABLE INDIVIDUAL_PARTICIPATION;
DROP TABLE TEAM_ATHLETE;
DROP TABLE TEAM_PARTICIPATION;
DROP TABLE COLLEGE_TEAM;
DROP TABLE ATHLETE;
DROP TABLE COLLEGE;





